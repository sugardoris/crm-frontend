<div class="table-loading" *ngIf="loading">
  <mat-spinner></mat-spinner>
</div>

<div class="card-wrapper" *ngIf="!loading && subscriber">
  <mat-card class="user-details">
    <mat-card-title class="card-title">
      <div *ngIf="subscriber.legalEntity">
        {{subscriber.companyName}}
      </div>
      <div *ngIf="!subscriber.legalEntity">
        {{subscriber.firstName + ' ' + subscriber.lastName}}
      </div>
    </mat-card-title>
    <mat-card-content class="card-content">
      <div>
        <span class="card-labels">OIB:</span><span class="card-data">{{subscriber.oib}}</span>
      </div>
      <div>
        <span class="card-labels">Email:</span><span class="card-data">{{subscriber.email}}</span>
      </div>
      <div>
        <span class="card-labels">Phone:</span><span class="card-data">{{subscriber.phone}}</span>
      </div>
      <div>
        <span class="card-labels">Address:</span><span class="card-data">
        {{subscriber.billingAddress + ', ' + subscriber.city?.name + ', ' + subscriber.city?.postcode}}
      </span>
      </div>
      <div>
        <span class="card-labels">Legal entity:</span><span class="card-data">
        <span *ngIf="subscriber.legalEntity">
          <mat-icon color="primary">check_circle_outline</mat-icon>
        </span>
        <span *ngIf="!subscriber.legalEntity">
          <mat-icon color="accent">highlight_off</mat-icon>
        </span>
      </span>
      </div>
      <div>
        <span class="card-labels">Active:</span><span class="card-data">
        <span *ngIf="subscriber.active">
          <mat-icon color="primary">check_circle_outline</mat-icon>
        </span>
        <span *ngIf="!subscriber.active">
          <mat-icon color="accent">highlight_off</mat-icon>
        </span>
      </span>
      </div>
      <div>
        <span class="card-labels">Date created:</span><span
        class="card-data">{{subscriber.createDate | date:'medium':'UTC+2':'hr'}}</span>
      </div>
      <div>
        <span class="card-labels">Created by:</span><span class="card-data">{{subscriber.createdBy}}</span>
      </div>
      <div>
        <span class="card-labels">Last update:</span><span class="card-data">
          <span *ngIf="subscriber.lastUpdate != null">{{subscriber.lastUpdate | date:'medium':'UTC+2':'hr'}}</span>
          <span *ngIf="subscriber.lastUpdate === null"> </span>
      </span>
      </div>
      <div>
        <span class="card-labels">Updated by:</span><span class="card-data">
          <span *ngIf="subscriber.lastUpdate != null">{{subscriber.updatedBy}}</span>
          <span *ngIf="subscriber.lastUpdate === null"> </span>
      </span>
      </div>
    </mat-card-content>
    <mat-card-actions align="end">
      <button mat-raised-button color="primary" routerLink="/subscriber/edit/{{subscriber.id!}}">Edit</button>
      <button mat-raised-button color="accent" (click)="openDeactivateDialog(subscriber.id!)">Deactivate</button>
    </mat-card-actions>
  </mat-card>
</div>
